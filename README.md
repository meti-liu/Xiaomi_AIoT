# 🚗 基于 AIoT 实验平台的自动驾驶仿真系统

本项目基于小米 AIoT 实验平台，设计并实现一个多模式、可交互的自动驾驶仿真系统。系统集成多种传感器与执行器模块，通过状态机控制不同驾驶模式的切换与执行，模拟现实中自动驾驶汽车的核心功能，包括避障、交通信号识别、手动驾驶、环境感知与目标追踪等。

---

## 🔧 硬件设备一览

| 模块 | 作用 |
|------|------|
| U1 主控板 | 控制中心 |
| S1 按键模块 | 模式切换与命令输入 |
| S2 六轴传感器 + 温湿度 + 光照 | 实现方向控制、环境监测 |
| S5 NFC 模块 | 启动认证（安全逻辑）|
| S6 超声波传感器 | 距离检测与避障 |
| E1 RGB LED + 数码管 | 指示灯 / 仪表盘显示 |
| E2 风扇 | 模拟汽车引擎（车速控制）|
| E3 窗帘电机 | 模拟汽车方向盘（转向控制）|

---

## 🧠 系统功能总览

| 模式编号 | 模式名称 | 功能说明 |
|----------|----------|----------|
| MODE1    | 🚧 避障模式 | 支持前/后/左/右四向避障，数码管显示实时距离，LED 灯指示安全程度（绿/黄/红） |
| MODE2    | 🚦 红绿灯模式 | 模拟交通信号灯倒计时：绿灯加速、黄灯减速、红灯停车 |
| MODE3    | 🕹️ 手动操控模式 | 利用 S2 传感器控制方向和速度，LED 与数码管同步反馈当前状态 |
| MODE4    | 🌡️ 环境检测模式 | 查询温度、湿度与光照，LED 调整显示亮度响应 |
| MODE5    | 📍 距离追踪模式 | 模拟车辆前进距离的实时追踪，数码管显示剩余距离，归零后结束运行 |

---

## 🚘 设计亮点

- 🧭 **状态机架构**：统一模式管理，结构清晰，便于扩展新模式  
- 🧲 **多传感器融合**：超声波、六轴、温湿度、光照多源信息感知  
- 🔐 **NFC 启动认证**：增加仿真系统安全性（支持扩展为授权车主）  
- 🧠 **智能避障逻辑**：基于距离分级控制方向 / 速度 / 停止动作  
- 🌡️ **环境反馈机制**：LED 灯光强度根据外部光照自动调节  
- 🖥️ **人机交互友好**：数码管实时反馈速度 / 转向角度 / 距离 / 环境信息

---

## 🧑‍💻 主要代码结构（C语言）

| 模块函数 | 功能说明 |
|----------|----------|
| `main()` | 初始化设备，进入主状态循环，处理模式切换 |
| `mode1` | 调用 `s6_ultrasonic_distance_get()` 进行方向避障控制 |
| `mode2_traffic_light_simulation()` | 模拟红绿灯倒计时与车速变化 |
| `mode3_direction_control()` | 获取 IMU 值实现方向+速度双控制 |
| `mode4_environment_monitoring()` | 处理温湿度与光照查询并显示 |
| `mode5_distance_tracking()` | 模拟终点倒计距离，归零结束系统 |

---

## 🎬 模拟展示说明

> 系统配合数码管、风扇、窗帘机与 LED 灯动态演示五种驾驶状态：

- 🟢 **绿灯状态**：风扇高速旋转，数码管显示倒计时
- 🔴 **障碍物靠近**：数码管显示距离，LED 红灯闪烁，风扇停止
- 📉 **环境光变弱**：LED 自动增亮，反映感知到的外部环境变化
- 🚗 **手动驾驶中**：通过加速度计控制车速 / 转向，并在数码管中显示
- 📍 **距离追踪中**：每 0.5 秒刷新距离，当为 0 时系统进入 DONE 状态



